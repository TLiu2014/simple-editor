<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple Editor</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="settings.css">
</head>
<body>
  <div class="container">
    <div class="tabs-container">
      <div id="tabs-list" class="tabs-list"></div>
      <button id="new-tab-btn" class="new-tab-btn" title="New Tab">+</button>
    </div>
    <div id="format-bar" class="format-bar hidden">
      <div class="format-bar-group">
        <select id="format-style" class="format-select" title="Text Style">
          <option value="normal">Normal</option>
          <option value="title">Title</option>
          <option value="h1">Heading 1</option>
          <option value="h2">Heading 2</option>
          <option value="h3">Heading 3</option>
        </select>
      </div>
      <div class="format-bar-separator" id="format-separator-1"></div>
      <div class="format-bar-group" id="format-group-bold-italic-underline">
        <button id="format-bold" class="format-btn" title="Bold (‚åòB / Ctrl+B)">
          <strong>B</strong>
        </button>
        <button id="format-italic" class="format-btn" title="Italic (‚åòI / Ctrl+I)">
          <em>I</em>
        </button>
        <button id="format-underline" class="format-btn" title="Underline (‚åòU / Ctrl+U)">
          <u>U</u>
        </button>
      </div>
      <div class="format-bar-separator" id="format-separator-2"></div>
      <div class="format-bar-group" id="format-group-lists">
        <button id="format-list-ul" class="format-btn" title="Bullet List">
          <span>‚Ä¢ List</span>
        </button>
        <button id="format-list-ol" class="format-btn" title="Numbered List">
          <span>1. List</span>
        </button>
      </div>
      <div class="format-bar-separator" id="format-separator-3"></div>
      <div class="format-bar-group" id="format-group-colors">
        <label class="format-color-label" title="Font Color">
          <span class="format-color-icon">A</span>
          <input type="color" id="format-fontColor" class="format-color-input" value="#cccccc">
          <input type="text" id="format-fontColor-hex" class="format-color-hex" placeholder="#cccccc" pattern="^#[0-9A-Fa-f]{6}$">
        </label>
        <label class="format-color-label" title="Background Color">
          <span class="format-color-icon">‚ñÆ</span>
          <input type="color" id="format-backgroundColor" class="format-color-input" value="#1e1e1e">
          <input type="text" id="format-backgroundColor-hex" class="format-color-hex" placeholder="#1e1e1e" pattern="^#[0-9A-Fa-f]{6}$">
        </label>
      </div>
      <div class="format-bar-separator"></div>
      <div class="format-bar-group">
        <button id="toggle-preview" class="format-btn" title="Toggle Preview (‚åò‚áßP / Ctrl+Shift+P)">
          <span>üëÅ Preview</span>
        </button>
      </div>
    </div>
    <div class="main-content">
      <div id="outline-panel" class="outline-panel hidden">
        <div class="outline-header">Outline</div>
        <div id="outline-content" class="outline-content"></div>
      </div>
      <div id="editor-wrapper" class="editor-wrapper">
        <div id="editor-container"></div>
        <div id="preview-container" class="preview-container hidden">
          <div id="preview-content" class="preview-content"></div>
        </div>
      </div>
      <div id="default-view" class="default-view hidden">
        <div class="default-view-content">
          <h1>Simple Editor</h1>
          <p>Create a new file or open an existing one to get started.</p>
          <div class="default-view-actions">
            <button id="default-new-file" class="btn btn-primary">New File</button>
            <button id="default-open-file" class="btn">Open File</button>
          </div>
        </div>
      </div>
      <div id="settings-container" class="settings-tab-container hidden">
        <div class="settings-content">
          <h1>Settings</h1>
          
          <div class="settings-section">
            <h2>Word Count Display</h2>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showChineseWordCount">
                Show Chinese Word Count
              </label>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showEnglishWordCount">
                Show English Word Count
              </label>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showTotalWordCount">
                Show Total Word Count
              </label>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showCharacterCount">
                Show Character Count
              </label>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showWordCountBreakdown">
                Show Detailed Breakdown
              </label>
              <span class="setting-hint">Shows breakdown like "Chinese: X, English: Y"</span>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showLineCount">
                Show Line Count
              </label>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showParagraphCount">
                Show Paragraph Count
              </label>
            </div>
          </div>

          <div class="settings-section">
            <h2>Editor</h2>
            
            <div class="setting-item">
              <label>Language Mode:</label>
              <div class="radio-group">
                <label>
                  <input type="radio" name="settings-languageMode" value="plaintext" id="settings-languageMode-plaintext">
                  Plain Text
                </label>
                <label>
                  <input type="radio" name="settings-languageMode" value="markdown" id="settings-languageMode-markdown">
                  Markdown
                </label>
              </div>
            </div>
            
            <div class="setting-item">
              <label for="settings-fontSize">Font Size:</label>
              <input type="number" id="settings-fontSize" min="8" max="72" value="14">
            </div>
            
            <div class="setting-item">
              <label>Theme:</label>
              <div class="radio-group">
                <label>
                  <input type="radio" name="settings-theme" value="vs-dark" id="settings-theme-dark">
                  Dark
                </label>
                <label>
                  <input type="radio" name="settings-theme" value="vs" id="settings-theme-light">
                  Light
                </label>
                <label>
                  <input type="radio" name="settings-theme" value="hc-black" id="settings-theme-hc">
                  High Contrast Dark
                </label>
                <label>
                  <input type="radio" name="settings-theme" value="custom" id="settings-theme-custom">
                  Custom
                </label>
              </div>
            </div>
            
            <div class="setting-item">
              <label for="settings-fontColor">Font Color:</label>
              <div class="color-input-group">
                <input type="color" id="settings-fontColor" value="#cccccc" title="Pick a color" disabled>
                <input type="text" id="settings-fontColor-hex" class="color-hex-input" placeholder="#cccccc" pattern="^#[0-9A-Fa-f]{6}$" title="Enter hex color code" disabled>
              </div>
            </div>
            
            <div class="setting-item">
              <label for="settings-backgroundColor">Background Color:</label>
              <div class="color-input-group">
                <input type="color" id="settings-backgroundColor" value="#1e1e1e" title="Pick a color" disabled>
                <input type="text" id="settings-backgroundColor-hex" class="color-hex-input" placeholder="#1e1e1e" pattern="^#[0-9A-Fa-f]{6}$" title="Enter hex color code" disabled>
              </div>
            </div>
            
            <div class="setting-item">
              <label for="settings-wordWrap">Word Wrap:</label>
              <select id="settings-wordWrap">
                <option value="on">On</option>
                <option value="off">Off</option>
              </select>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-minimap">
                Show Minimap
              </label>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-lineNumbers">
                Show Line Numbers
              </label>
            </div>
          </div>
          
          <div class="settings-section">
            <h2>View</h2>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showOutline">
                Show Outline
              </label>
              <span class="setting-shortcut" id="shortcut-outline">‚åò‚áßO / Ctrl+Shift+O</span>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showWordCount">
                Show Word Count
              </label>
              <span class="setting-shortcut" id="shortcut-word-count">‚åò‚áßW / Ctrl+Shift+W</span>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showStatusBar">
                Show Status Bar
              </label>
              <span class="setting-shortcut" id="shortcut-status-bar">‚åò‚áßB / Ctrl+Shift+B</span>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showFormatBarBoldItalic">
                Show Bold/Italic/Underline
              </label>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showFormatBarLists">
                Show Bullet/Numbered Lists
              </label>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-showFormatBarColors">
                Show Color Pickers
              </label>
            </div>
          </div>
          
          <div class="settings-section">
            <h2>Auto Save</h2>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="settings-autoSave">
                Enable Auto Save
              </label>
              <span class="setting-shortcut" id="shortcut-auto-save">‚åò‚áßA / Ctrl+Shift+A</span>
            </div>
            
            <div class="setting-item">
              <label for="settings-autoSaveInterval">Auto Save Interval (seconds):</label>
              <input type="number" id="settings-autoSaveInterval" min="1" max="60" value="1">
            </div>
          </div>
          
          <div class="settings-actions">
            <button id="settings-saveBtn" class="btn btn-primary">Save</button>
            <button id="settings-cancelBtn" class="btn">Cancel</button>
          </div>
        </div>
      </div>
    </div>
    <div id="wordCount" class="word-count hidden">
      <span id="wordCountText">Words: 0 | Characters: 0</span>
    </div>
    <div id="status-bar" class="status-bar">
      <div class="status-left">
        <span id="status-word-count">Words: 0 | Characters: 0</span>
      </div>
      <div class="status-right">
        <span id="status-auto-save">Auto Save: ON</span>
        <span id="status-save-indicator" class="save-indicator"></span>
      </div>
    </div>
  </div>
  <script>
    // Save Node's require before Monaco loader overwrites it
    const nodeRequire = require;
    window.nodeRequire = nodeRequire;
    const path = nodeRequire('path');
    
    // Get the absolute path to Monaco
    const monacoBasePath = path.join(__dirname, 'node_modules', 'monaco-editor', 'min');
    
    // Load Monaco loader
    const loaderScript = document.createElement('script');
    loaderScript.src = path.join(monacoBasePath, 'vs', 'loader.js');
    
    loaderScript.onload = function() {
      // Configure Monaco paths
      require.config({ 
        baseUrl: monacoBasePath,
        paths: { 
          'vs': path.join(monacoBasePath, 'vs')
        }
      });
      
      // Load renderer script after Monaco is configured
      const rendererScript = document.createElement('script');
      rendererScript.src = 'renderer.js';
      document.body.appendChild(rendererScript);
    };
    
    loaderScript.onerror = function(err) {
      console.error('Failed to load Monaco Editor loader:', err);
    };
    
    document.head.appendChild(loaderScript);
  </script>
</body>
</html>
